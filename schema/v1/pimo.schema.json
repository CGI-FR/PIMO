{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/cgi-fr/pimo/pkg/model/definition",
  "$ref": "#/$defs/Definition",
  "$defs": {
    "CacheDefinition": {
      "properties": {
        "unique": {
          "type": "boolean"
        },
        "reverse": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Class": {
      "properties": {
        "input": {
          "type": "string"
        },
        "output": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "input",
        "output"
      ]
    },
    "DateParserType": {
      "properties": {
        "inputFormat": {
          "type": "string"
        },
        "outputFormat": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Definition": {
      "properties": {
        "version": {
          "type": "string"
        },
        "seed": {
          "type": "integer"
        },
        "masking": {
          "items": {
            "$ref": "#/$defs/Masking"
          },
          "type": "array"
        },
        "caches": {
          "patternProperties": {
            ".*": {
              "$ref": "#/$defs/CacheDefinition"
            }
          },
          "type": "object"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "version",
        "masking"
      ]
    },
    "FF1Type": {
      "properties": {
        "keyFromEnv": {
          "type": "string"
        },
        "tweakField": {
          "type": "string"
        },
        "radix": {
          "type": "integer"
        },
        "decrypt": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "keyFromEnv"
      ]
    },
    "IncrementalType": {
      "properties": {
        "start": {
          "type": "integer"
        },
        "increment": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "start",
        "increment"
      ]
    },
    "LuhnType": {
      "properties": {
        "universe": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "MarkovType": {
      "properties": {
        "max-size": {
          "type": "integer"
        },
        "sample": {
          "type": "string"
        },
        "separator": {
          "type": "string"
        },
        "order": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "MaskType": {
      "oneOf": [
        {
          "required": [
            "add"
          ],
          "title": "Add"
        },
        {
          "required": [
            "add-transient"
          ],
          "title": "AddTransient"
        },
        {
          "required": [
            "constant"
          ],
          "title": "Constant"
        },
        {
          "required": [
            "randomChoice"
          ],
          "title": "RandomChoice"
        },
        {
          "required": [
            "randomChoiceInUri"
          ],
          "title": "RandomChoiceInURI"
        },
        {
          "required": [
            "command"
          ],
          "title": "Command"
        },
        {
          "required": [
            "randomInt"
          ],
          "title": "RandomInt"
        },
        {
          "required": [
            "weightedChoice"
          ],
          "title": "WeightedChoice"
        },
        {
          "required": [
            "regex"
          ],
          "title": "Regex"
        },
        {
          "required": [
            "hash"
          ],
          "title": "Hash"
        },
        {
          "required": [
            "hashInUri"
          ],
          "title": "HashInURI"
        },
        {
          "required": [
            "randDate"
          ],
          "title": "RandDate"
        },
        {
          "required": [
            "incremental"
          ],
          "title": "Incremental"
        },
        {
          "required": [
            "replacement"
          ],
          "title": "Replacement"
        },
        {
          "required": [
            "template"
          ],
          "title": "Template"
        },
        {
          "required": [
            "template-each"
          ],
          "title": "TemplateEach"
        },
        {
          "required": [
            "duration"
          ],
          "title": "Duration"
        },
        {
          "required": [
            "remove"
          ],
          "title": "Remove"
        },
        {
          "required": [
            "range"
          ],
          "title": "RangeMask"
        },
        {
          "required": [
            "randomDuration"
          ],
          "title": "RandomDuration"
        },
        {
          "required": [
            "fluxUri"
          ],
          "title": "FluxURI"
        },
        {
          "required": [
            "randomDecimal"
          ],
          "title": "RandomDecimal"
        },
        {
          "required": [
            "dateParser"
          ],
          "title": "DateParser"
        },
        {
          "required": [
            "fromCache"
          ],
          "title": "FromCache"
        },
        {
          "required": [
            "ff1"
          ],
          "title": "FF1"
        },
        {
          "required": [
            "pipe"
          ],
          "title": "Pipe"
        },
        {
          "required": [
            "fromjson"
          ],
          "title": "FromJSON"
        },
        {
          "required": [
            "luhn"
          ],
          "title": "Luhn"
        },
        {
          "required": [
            "markov"
          ],
          "title": "Markov"
        },
        {
          "required": [
            "transcode"
          ],
          "title": "Transcode"
        }
      ],
      "properties": {
        "add": true,
        "add-transient": true,
        "constant": true,
        "randomChoice": {
          "items": true,
          "type": "array"
        },
        "randomChoiceInUri": {
          "type": "string"
        },
        "command": {
          "type": "string"
        },
        "randomInt": {
          "$ref": "#/$defs/RandIntType"
        },
        "weightedChoice": {
          "items": {
            "$ref": "#/$defs/WeightedChoiceType"
          },
          "type": "array"
        },
        "regex": {
          "type": "string"
        },
        "hash": {
          "items": true,
          "type": "array"
        },
        "hashInUri": {
          "type": "string"
        },
        "randDate": {
          "$ref": "#/$defs/RandDateType"
        },
        "incremental": {
          "$ref": "#/$defs/IncrementalType"
        },
        "replacement": {
          "type": "string"
        },
        "template": {
          "type": "string"
        },
        "template-each": {
          "$ref": "#/$defs/TemplateEachType"
        },
        "duration": {
          "type": "string"
        },
        "remove": {
          "type": "boolean"
        },
        "range": {
          "type": "integer"
        },
        "randomDuration": {
          "$ref": "#/$defs/RandomDurationType"
        },
        "fluxUri": {
          "type": "string"
        },
        "randomDecimal": {
          "$ref": "#/$defs/RandomDecimalType"
        },
        "dateParser": {
          "$ref": "#/$defs/DateParserType"
        },
        "fromCache": {
          "type": "string"
        },
        "ff1": {
          "$ref": "#/$defs/FF1Type"
        },
        "pipe": {
          "$ref": "#/$defs/PipeType"
        },
        "fromjson": {
          "type": "string"
        },
        "luhn": {
          "$ref": "#/$defs/LuhnType"
        },
        "markov": {
          "$ref": "#/$defs/MarkovType"
        },
        "transcode": {
          "$ref": "#/$defs/TranscodeType"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Masking": {
      "oneOf": [
        {
          "required": [
            "selector",
            "mask"
          ],
          "title": "case1"
        },
        {
          "required": [
            "selector",
            "masks"
          ],
          "title": "case2"
        },
        {
          "required": [
            "selectors",
            "mask"
          ],
          "title": "case3"
        },
        {
          "required": [
            "selectors",
            "masks"
          ],
          "title": "case4"
        }
      ],
      "properties": {
        "selector": {
          "$ref": "#/$defs/SelectorType"
        },
        "selectors": {
          "items": {
            "$ref": "#/$defs/SelectorType"
          },
          "type": "array"
        },
        "mask": {
          "$ref": "#/$defs/MaskType"
        },
        "masks": {
          "items": {
            "$ref": "#/$defs/MaskType"
          },
          "type": "array"
        },
        "cache": {
          "type": "string"
        },
        "preserve": {
          "type": "string"
        },
        "seed": {
          "$ref": "#/$defs/SeedType"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "PipeType": {
      "properties": {
        "masking": {
          "items": {
            "$ref": "#/$defs/Masking"
          },
          "type": "array"
        },
        "injectParent": {
          "type": "string"
        },
        "injectRoot": {
          "type": "string"
        },
        "file": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "RandDateType": {
      "properties": {
        "dateMin": {
          "type": "string",
          "format": "date-time"
        },
        "dateMax": {
          "type": "string",
          "format": "date-time"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "dateMin",
        "dateMax"
      ]
    },
    "RandIntType": {
      "properties": {
        "min": {
          "type": "integer"
        },
        "max": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "min",
        "max"
      ]
    },
    "RandomDecimalType": {
      "properties": {
        "Min": {
          "type": "number"
        },
        "Max": {
          "type": "number"
        },
        "Precision": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "Min",
        "Max",
        "Precision"
      ]
    },
    "RandomDurationType": {
      "properties": {
        "Min": {
          "type": "string"
        },
        "Max": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "Min",
        "Max"
      ]
    },
    "SeedType": {
      "properties": {
        "field": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "SelectorType": {
      "properties": {
        "jsonpath": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "jsonpath"
      ]
    },
    "TemplateEachType": {
      "properties": {
        "item": {
          "type": "string"
        },
        "index": {
          "type": "string"
        },
        "template": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "TranscodeType": {
      "properties": {
        "classes": {
          "items": {
            "$ref": "#/$defs/Class"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "WeightedChoiceType": {
      "properties": {
        "choice": true,
        "weight": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "choice",
        "weight"
      ]
    }
  }
}
